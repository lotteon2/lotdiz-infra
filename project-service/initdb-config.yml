apiVersion: v1
kind: ConfigMap
metadata:
  name: project-initdb-config
data:
  initdb.sql: |
    use project-service;
    CREATE TABLE banner
    (
        banner_id        BIGINT AUTO_INCREMENT NOT NULL,
        banner_image_url VARCHAR(255)          NOT NULL,
        banner_url       VARCHAR(255)          NOT NULL,
        CONSTRAINT pk_banner PRIMARY KEY (banner_id)
    );
    CREATE TABLE category
    (
        category_id   BIGINT AUTO_INCREMENT NOT NULL,
        category_name VARCHAR(255)          NOT NULL,
        CONSTRAINT pk_category PRIMARY KEY (category_id)
    );
    CREATE TABLE maker
    (
        maker_id           BIGINT AUTO_INCREMENT NOT NULL,
        created_at         datetime              NULL,
        updated_at         datetime              NULL,
        member_id          BIGINT                NOT NULL,
        maker_name         VARCHAR(255)          NOT NULL,
        maker_email        VARCHAR(255)          NOT NULL,
        maker_phone_number VARCHAR(255)          NOT NULL,
        maker_kakao_url    VARCHAR(255)          NULL,
        maker_home_url     VARCHAR(255)          NULL,
        maker_sns_url      VARCHAR(255)          NULL,
        CONSTRAINT pk_maker PRIMARY KEY (maker_id)
    );

    ALTER TABLE maker
        ADD CONSTRAINT uc_maker_member UNIQUE (member_id);
    CREATE TABLE project
    (
        project_id              BIGINT AUTO_INCREMENT          NOT NULL,
        created_at              datetime                       NULL,
        updated_at              datetime                       NULL,
        maker_id                BIGINT                         NULL,
        category_id             BIGINT                         NULL,
        project_name            VARCHAR(255)                   NOT NULL,
        project_description     VARCHAR(255)                   NOT NULL,
        project_tag             VARCHAR(255)                   NOT NULL,
        project_target_amount   BIGINT                         NOT NULL,
        project_status          VARCHAR(255) DEFAULT 'PENDING' NOT NULL,
        project_story_image_url VARCHAR(255)                   NOT NULL,
        project_is_authorized   BIT(1)                         NOT NULL,
        project_due_date        datetime                       NOT NULL,
        CONSTRAINT pk_project PRIMARY KEY (project_id)
    );

    ALTER TABLE project
        ADD CONSTRAINT FK_PROJECT_ON_CATEGORY FOREIGN KEY (category_id) REFERENCES category (category_id);

    ALTER TABLE project
        ADD CONSTRAINT FK_PROJECT_ON_MAKER FOREIGN KEY (maker_id) REFERENCES maker (maker_id);

    CREATE TABLE project_image
    (
        project_image_id           BIGINT AUTO_INCREMENT NOT NULL,
        created_at                 datetime              NULL,
        updated_at                 datetime              NULL,
        project_id                 BIGINT                NULL,
        project_image_url          VARCHAR(255)          NOT NULL,
        project_image_is_thumbnail BIT(1)                NOT NULL,
        CONSTRAINT pk_project_image PRIMARY KEY (project_image_id)
    );

    ALTER TABLE project_image
        ADD CONSTRAINT FK_PROJECT_IMAGE_ON_PROJECT FOREIGN KEY (project_id) REFERENCES project (project_id);

    CREATE TABLE lotdeal
    (
        lotdeal_id         BIGINT AUTO_INCREMENT NOT NULL,
        created_at         datetime              NULL,
        updated_at         datetime              NULL,
        project_id         BIGINT                NULL,
        lotdeal_start_time datetime              NULL,
        lotdeal_due_time   datetime              NULL,
        CONSTRAINT pk_lotdeal PRIMARY KEY (lotdeal_id)
    );

    ALTER TABLE lotdeal
        ADD CONSTRAINT FK_LOTDEAL_ON_PROJECT FOREIGN KEY (project_id) REFERENCES project (project_id);

    CREATE TABLE product
    (
        product_id                        BIGINT AUTO_INCREMENT NOT NULL,
        created_at                        datetime              NULL,
        updated_at                        datetime              NULL,
        project_id                        BIGINT                NULL,
        product_name                      VARCHAR(255)          NOT NULL,
        product_description               VARCHAR(255)          NOT NULL,
        product_price                     BIGINT                NOT NULL,
        product_registered_stock_quantity BIGINT                NOT NULL,
        product_current_stock_quantity    BIGINT                NOT NULL,
        CONSTRAINT pk_product PRIMARY KEY (product_id)
    );

    ALTER TABLE product
        ADD CONSTRAINT FK_PRODUCT_ON_PROJECT FOREIGN KEY (project_id) REFERENCES project (project_id);
    
    CREATE TABLE support_signature
    (
        support_signature_id      BIGINT AUTO_INCREMENT NOT NULL,
        created_at                datetime              NULL,
        updated_at                datetime              NULL,
        project_id                BIGINT                NULL,
        member_id                 BIGINT                NOT NULL,
        support_signature_content VARCHAR(500)          NOT NULL,
        CONSTRAINT pk_support_signature PRIMARY KEY (support_signature_id)
    );

    ALTER TABLE support_signature
        ADD CONSTRAINT FK_SUPPORT_SIGNATURE_ON_PROJECT FOREIGN KEY (project_id) REFERENCES project (project_id);
    
    insert into category(category_name) values ('패션');
    insert into category(category_name) values ('음식');
    insert into category(category_name) values ('가전');
    insert into category(category_name) values ('도서');
    insert into category(category_name) values ('홈리빙');

    insert into maker (created_at, updated_at, maker_email, maker_home_url, maker_kakao_url, maker_name, maker_phone_number, maker_sns_url, member_id) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 'cso6005@nvaer.com', '/home', '/kakao', '최소영', '01033344455','/sns', 1);
    insert into maker (created_at, updated_at, maker_email, maker_home_url, maker_kakao_url, maker_name, maker_phone_number, maker_sns_url, member_id) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 'cso6005@nvaer.com', '/home', '/kakao', '이채민', '01033344455','/sns', 2);
    insert into maker (created_at, updated_at, maker_email, maker_home_url, maker_kakao_url, maker_name, maker_phone_number, maker_sns_url, member_id) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 'cso6005@nvaer.com', '/home', '/kakao', '이상원', '01033344455','/sns', 3);
    insert into maker (created_at, updated_at, maker_email, maker_home_url, maker_kakao_url, maker_name, maker_phone_number, maker_sns_url, member_id) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 'cso6005@nvaer.com', '/home', '/kakao', '이진우', '01033344455','/sns', 4);
    insert into maker (created_at, updated_at, maker_email, maker_home_url, maker_kakao_url, maker_name, maker_phone_number, maker_sns_url, member_id) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 'cso6005@nvaer.com', '/home', '/kakao', '이우엽', '01033344455','/sns', 5);

    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 1, 1, '좋아요', '2023-12-11T23:59:59', true, '소라색 셔츠 판매', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '셔츠', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 1, 2, '좋아요', '2023-12-11T23:59:59', true, '파란색 셔츠 판매', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '셔츠', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 1, 3, '좋아요', '2023-12-11T23:59:59', true, '와인색 셔츠 판매', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '셔츠', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 1, 4, '좋아요', '2023-12-11T23:59:59', false, '반바지 판매', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '바지', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 2, 5, '좋아요', '2023-12-11T23:59:59', true, '맛있는 딸기', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '과일', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 2, 1, '좋아요', '2023-12-11T23:59:59', true, '맛있는 망고', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '과일', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 2, 2, '좋아요', '2023-12-11T23:59:59', true, '맛있는 수박', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '과일', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 3, 3, '좋아요', '2023-12-11T23:59:59', true, '맥북 사고싶다', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '노트북', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 3, 1, '좋아요', '2023-12-11T23:59:59', true, '애플폰', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '폰', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 3, 1, '좋아요', '2023-12-11T23:59:59', true, '튼튼 냉장고', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '냉장고', 10000000 );

    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 2, 1, '좋아요', '2023-12-11T23:59:59', true, '캠핑 음식', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '캠핑', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 5, 1, '좋아요', '2023-12-11T23:59:59', true, '캠핑 화로 불멍', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '캠핑', 10000000 );
    insert into project (created_at, updated_at, category_id, maker_id, project_description, project_due_date, project_is_authorized, project_name, project_status, project_story_image_url, project_tag, project_target_amount) values ('2023-12-11T23:59:59', '2023-12-11T23:59:59', 1, 1, '좋아요', '2023-12-11T23:59:59', true, '캠핑 옷', 'PROCESSING', '/project-img/명일원-스트로우베리.png', '캠핑', 10000000 );

    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', '2023-11-09T10:59:59', '2023-11-08T23:59:59', 1);
    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-08T23:59:59', '2023-10-08T23:59:59', '2023-11-09T10:59:59', '2023-11-08T23:59:59', 2);
    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-08T23:59:59', '2023-10-08T23:59:59', '2023-11-09T10:59:59', '2023-10-08T23:59:59', 3);
    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-08T23:59:59', '2023-10-08T23:59:59', '2023-11-09T10:59:59', '2023-10-08T23:59:59', 4);
    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-08T23:59:59', '2023-10-08T23:59:59', '2023-11-09T10:59:59', '2023-10-08T23:59:59', 5);
    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-08T23:59:59', '2023-10-08T23:59:59', '2023-11-09T10:59:59', '2023-10-08T23:59:59', 6);
    insert into lotdeal(created_at, updated_at, lotdeal_due_time, lotdeal_start_time, project_id) values ('2023-10-08T23:59:59', '2023-10-08T23:59:59', '2023-11-09T10:59:59', '2023-10-08T23:59:59', 7);

    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 20, '옷 좋아요!!', '긴긴 소라색 셔츠', 100000, 150, 1);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 50, '옷 좋아요!!', '짧은 소라색 셔츠', 100000, 150, 1);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 0, '옷 좋아요!!', '긴긴 파랑색 셔츠', 100000, 150, 2);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 10, '옷 좋아요!!', '반팔 색이 더 진한 파랑색 셔츠', 100000, 150, 3);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 20, '옷 좋아요!!', '반팔 색이 더 진한 파랑색 셔츠', 100000, 150, 4);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 30, '옷 좋아요!!', '반팔 색이 더 진한 파랑색 셔츠', 100000, 150, 5);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 40, '옷 좋아요!!', '반팔 색이 더 진한 파랑색 셔츠', 100000, 150, 6);
    insert into product(created_at, updated_at, product_current_stock_quantity, product_description, product_name, product_price, product_registered_stock_quantity, project_id) values ('2023-10-09T23:59:59','2023-10-09T23:59:59', 60, '옷 좋아요!!', '반팔 색이 더 진한 파랑색 셔츠', 100000, 150, 7);

    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', true, '/project-img/딸기.png', 1);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 1);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 1);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 1);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 1);

    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', true, '/project-img/딸기.png', 2);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 2);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 2);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 2);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 2);

    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', true, '/project-img/딸기.png', 3);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 3);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 3);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 3);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 3);

    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', true, '/project-img/딸기.png', 4);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 4);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 4);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 4);
    insert into project_image(created_at, updated_at, project_image_is_thumbnail, project_image_url, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', false, '/project-img/딸기.png', 4);

    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 1, '기대됩니다.!!', 1);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 1, '기대됩니다.!!', 2);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 2, '기대됩니다.!!', 2);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 3, '기대됩니다.!!', 2);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 3, '기대됩니다.!!', 3);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 8, '기대됩니다.!!', 8);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 9, '기대됩니다.!!', 8);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 10, '기대됩니다.!!', 8);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 11, '기대됩니다.!!', 8);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 12, '기대됩니다.!!', 8);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 13, '기대됩니다.!!', 8);

    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 13, '기대됩니다.!!', 4);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 14, '기대됩니다.!!', 4);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 15, '기대됩니다.!!', 4);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 16, '기대됩니다.!!', 4);
    insert into support_signature(created_at, updated_at, member_id, support_signature_content, project_id) values ('2023-10-09T23:59:59', '2023-10-09T23:59:59', 17, '기대됩니다.!!', 4);

    insert into banner(banner_image_url, banner_url) values ('/banner-img/banner-lotdeal.png', '/lotdeal');
    insert into banner(banner_image_url, banner_url) values ('/banner-img/banner-membership.png', '/membership');
    insert into banner(banner_image_url, banner_url) values ('/banner-img/banner-maker.png', '/maker');
    insert into banner(banner_image_url, banner_url) values ( '/banner-img/banner-camping.png', '/special-exhibition/camping');
